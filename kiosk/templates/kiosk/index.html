<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>
function startTime() {
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    m = checkTime(m);
    s = checkTime(s);
    document.getElementById('txt').innerHTML =
    h + ":" + m + ":" + s;
    checkMBTA();
    var t = setTimeout(startTime, 1000);
}
function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
}
function checkMBTA(){
    $(document).ready(function() {
        console.log( "ready!" );
        var url = "http://realtime.mbta.com/developer/api/v2/predictionsbystop?api_key=wX9NwuHnZU2ToO7GmGR9uw&stop=place-davis&format=json";
        var json = $.getJSON(url, function(data) {
            console.log(data.stop_name);
            return data.stop_name
        });
        document.getElementById('train').innerHTML = json;
    });
}
</script>
</head>

<body onload="startTime()">

<div id="txt"></div>
<div id="train"></div>

{% if latest_message_list %}
    <ul>
    {% for message in latest_message_list %}
        <li><a href="{% url 'kiosk:detail' message.id %}">{{ message.message_text }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No messages are available.</p>
{% endif %}

</body>
</html>